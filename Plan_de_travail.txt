### PLAN DE TRAVAIL
1 - Énoncé:
Projet "Regalia" (Système de diffusion et performance musicale acousmatique en temps réel par capture de mouvement)

2 - Description:
Ce système est constitué de deux dispositifs employés par un utilisateur afin d'exécuter une musique spatialisée en temps réel. L'exécution d'une composition par enclenchement de banques de son (et leur modification via des gels temporels, boucles et panoramisation) est déterminée par l'utilisateur grâce à un contrôleur appelé "l'orbe". Les paramètres de mouvement et de positionnement sont capturés par un ensemble de capteurs (le "sceptre") qui est manipulé par l'utilisateur afin de diffuser une musique dans l'espace. Le système sera utilisé dans un environnement de haut-parleurs disposés en cercle.

3 - Analyses des besoins:
#Capteur de mouvement: caméra fixe qui suit et analyse le mouvement du sceptre.
# Sceptre: Capteur d'orientation fixé sur un bâton. L'orientation est reliée au volume du son. C'est l'utilisateur qui le déplace pour panoramiser le son.
# Orbe: Contrôleur midi/OSC (idéalement sans fil) qui se tient à une main.  Il a des touches effectuant des commandes différentes.
  - Gel de position: Crée une copie d'un paramètre de positionnement qui reste figé à cette valeur aussi longtemps que l'utilisateur le désire.
  -Gel d'orientation: Fige le paramètre d'orientation du sceptre, fixant ainsi le volume.
  -Boucle: Fait boucler le dernier mouvement effectué (ex: la dernière seconde) aussi longtemps que l'utilisateur le désire.
  -Enclenchement: Enclenche une section de pièce contenant des boucles prédéterminées. Il est aussi possible au sein de ces sections d'enclencher des sons individuellement.
  -Arrêt: Empêche le sceptre d'envoyer de l'information.
#"Partition" numérique: Il s'agit d'une ensemble de séquences de sons qui peuvent être enclenchés par l'orbe. Ceux-ci sont organisés en grandes sections qui déterminent les grands mouvements de la pièce. Cette "partition" est pré-programmée dans un DAW comme Ableton Live.

4 - Recherche: 
#Capteur de mouvement: La kinect s'avère être le capteur de mouvement la plus fiable pour le genre de mouvement désiré. Étant donné le besoin d'avoir un ample mouvement en arc de cercle afin de pouvoir positionner le son en avant et sur les côtés (en arrière sera impossible puisque l'utilisateur doit faire face à la kinect). Un programme nommé Synapse sera utilisé pour l'analyse du mouvement de la kinect avec un "rig" du corps de l'utilisateur. Puisque la kinect s'attend à analyser un corps humain, il sera nécessaire que le sceptre ne soit pas trop long afin de toujours faire partie du squelette (on veut suggérer à l'auditeur que c'est la position du sceptre qui détermine la panoramisation, et non celle de la main).
#Sceptre: Le capteur d'orientation utilisé est le BNO055 d'Adafruit. Il sera relié à un microcontrôleur Arduino afin de recevoir les données. Seule l'orientation de haut en bas sera prise en compte. Il serait toutefois possible plus tard d'ajouter des fonctionnalités additionnelles en prenant en compte les autres paramètres d'orientation. Un accéléromètre pourrait aussi être ajouté pour ajouter une complexité supplémentaire au jeu de l'instrument.
#Orbe: Il s'agit d'une manette tenue dans la main. La façon exacte dont elle peut être faite est variée, en autant qu'il soit possible de l'utiliser à une seule main et qu'elle comprenne au moins 5 ou 6 boutons. La manette est reliée elle aussi au Arduino afin de contrôler l'information qu'il reçoit.

5 - Modèle:
Le modèle utilisé est celui d'une table de mixage traditionnellement utilisée en acousmatique. Il doit être possible pour Regalia de reproduire les mouvements normalement possibles sur ce dispositif mais dans les airs. La transposition du médium originel à ce genre de système par capture de mouvement introduit certaines restrictions, puisqu'il n'est possible d'allumer qu'un seul potentiomètre à la fois (le sceptre représentant le potentiomètre précis que l'on veut affecter et son orientation représentant la quantité de volume qu'on laisse passer). Ces restrictions sont amoindries par l'inclusion de l'orbe, qui permet de multilplier et d'altérer les comportements du sceptre afin de donner une liberté créatrice équivalente à celle de la table de mixage, mais avec l'aisance de la capture de mouvement.

6 - Méthode:
Un capteur de mouvements est installé en face de l'utilisateur. Il analyse en tout temps la position de la main droite de ce dernier et envoie l'information à un ordinateur. L'information sur la position de la main est envoyée à un programme qui l'associe à la position d'un ou des hauts-parleurs. L'orientation est prise en charge par un capteur qui envoie ses données à travers l'Arduino dans l'ordinateur. Si l'ordinateur reçoit l'information que le sceptre n'est plus à sa position verticale par défaut, il augmente le volume de sortie du ou des hauts-parleurs reliés à la position actuelle par rapport à l'ampleur de la rotation du sceptre. 
L'orbe sert de manette pouvant jouer avec la réception de paramètres par l'ordinateur. Il peut "geler" la réception de nouveaux paramètres, les faire boucler, etc. Ses fonctions de modifications de paramètres sont reliés au programme lui-même, alors que ses fonctions de contrôle de la "partition" numérique sont reliées directement à Ableton Live.

7 - Implémentation:
Les plateformes utilisées sont les suivantes: Synapse, Pyo, Arduino IDE, Max et Ableton Live
Tout d'abord, ce que la Kinect reçoit passe à travers Synapse, qui envoie un output des données de position directement dans Pyo. Le capteur de rotation, lui, envoie ses données à l'Arduino (Pré-programmé avec l'IDE d'Arduino) qui relaie son information au  même programme Pyo. Le programme Pyo analyse toutes les informations reçues (de position et d'amplitude) et les associe avec des channels pré-déterminées correspondant aux hauts-parleurs disposés en cercle. Ces informations peuvent tout au courant de la vie du programme être modifiées par l'orbe, qui peut actionner certaines routines modifiant le flux d'information. Toute l'information sortant de Pyo est dirigée vers Max, qui l'associe à la panoramisation et à l'amplitude directement dans Ableton Live (grâce à Max For Live). 


8 - Test et maintenance:
Notes et traitement d'information du matériel créé (TESTER TOUT LE TEMPS, À CHAQUE NOUVEAU MORCEAU DE CODE)
